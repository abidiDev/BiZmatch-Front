<header id="header" class="header fixed-top d-flex align-items-center">

  <div class="d-flex align-items-center justify-content-between">
    <a href="index.html" class="logo d-flex align-items-center">
      <img src="assets/img/logo.png" alt="">
      <span class="d-none d-lg-block">BIZZMATCH</span>
    </a>
    <i class="bi bi-list toggle-sidebar-btn"></i>
  </div><!-- End Logo -->

  <div class="search-bar">
    <form class="search-form d-flex align-items-center" method="POST" action="#">
      <input type="text" name="query" placeholder="Search" title="Enter search keyword">
      <button type="submit" title="Search"><i class="bi bi-search"></i></button>
    </form>
  </div><!-- End Search Bar -->

  <nav class="header-nav ms-auto">
    <ul class="d-flex align-items-center">

      <li class="nav-item d-block d-lg-none">
        <a class="nav-link nav-icon search-bar-toggle " href="#">
          <i class="bi bi-search"></i>
        </a>
      </li><!-- End Search Icon-->

      <li class="nav-item dropdown">

        <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
          <i class="bi bi-bell"></i>
          <span class="badge bg-primary badge-number">4</span>
        </a><!-- End Notification Icon -->

        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
          <li class="dropdown-header">
            You have 4 new notifications
            <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li class="notification-item">
            <i class="bi bi-exclamation-circle text-warning"></i>
            <div>
              <h4>Lorem Ipsum</h4>
              <p>Quae dolorem earum veritatis oditseno</p>
              <p>30 min. ago</p>
            </div>
          </li>

          <li>
            <hr class="dropdown-divider">
          </li>

          <li class="notification-item">
            <i class="bi bi-x-circle text-danger"></i>
            <div>
              <h4>Atque rerum nesciunt</h4>
              <p>Quae dolorem earum veritatis oditseno</p>
              <p>1 hr. ago</p>
            </div>
          </li>

          <li>
            <hr class="dropdown-divider">
          </li>

          <li class="notification-item">
            <i class="bi bi-check-circle text-success"></i>
            <div>
              <h4>Sit rerum fuga</h4>
              <p>Quae dolorem earum veritatis oditseno</p>
              <p>2 hrs. ago</p>
            </div>
          </li>

          <li>
            <hr class="dropdown-divider">
          </li>

          <li class="notification-item">
            <i class="bi bi-info-circle text-primary"></i>
            <div>
              <h4>Dicta reprehenderit</h4>
              <p>Quae dolorem earum veritatis oditseno</p>
              <p>4 hrs. ago</p>
            </div>
          </li>

          <li>
            <hr class="dropdown-divider">
          </li>
          <li class="dropdown-footer">
            <a href="#">Show all notifications</a>
          </li>

        </ul><!-- End Notification Dropdown Items -->

      </li><!-- End Notification Nav -->

      <li class="nav-item dropdown container">

        <a class="nav-link nav-icon" href="#" data-bs-toggle="modal" data-bs-target="#exampleModal1">
          <i class="bi bi-chat-left-text"></i>
          <span class="badge bg-success badge-number">3</span>
        </a><!-- End Messages Icon -->
     

        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow ">
          
   





        </ul><!-- End Messages Dropdown Items -->

      </li><!-- End Messages Nav -->

      <li class="nav-item dropdown pe-3">

        <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="data:image/png;base64,{{authService.User.image.image}}" alt="Profile" class="rounded-circle">
          <span class="d-none d-md-block dropdown-toggle ps-2">{{authService.User.fullName}}</span>
        </a><!-- End Profile Iamge Icon -->

        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile" >
          <li class="dropdown-header">
            <h6>{{authService.User.fullName}}</h6>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" [routerLink]="['/DashboardMainComponent/MainDashboardProfilComponent',authService.User.id]">
              <i class="bi bi-person"></i>
              <span>My Profile</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
              <i class="bi bi-gear"></i>
              <span>Account Settings</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="pages-faq.html">
              <i class="bi bi-question-circle"></i>
              <span>Need Help?</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" (click)="signOut()">
              <i class="bi bi-box-arrow-right"></i>
              <span>Sign Out</span>
            </a>
          </li>

        </ul><!-- End Profile Dropdown Items -->
      </li><!-- End Profile Nav -->

    </ul>
  </nav><!-- End Icons Navigation -->

</header>





<!-- Modal -->
<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">

<!-- Modal -->


  <div class="modal-dialog modal-xl">
   
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div  class="container py-5 px-4">
    
    
          <div class="row rounded-lg overflow-hidden shadow" >
            <!-- Users box-->
            <div class="col-5 px-0">
              <div class="bg-white">
        
                <div class="bg-gray px-4 py-2 bg-light">
                  
                  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="bi bi-plus"></i></button>

                </div>
        
                <div (click)="showmsg(conv.id)" class="messages-box" *ngFor="let conv of conversations">
                  <div class="list-group rounded-0">
                    <a  class="list-group-item list-group-item-action  text-white rounded-0">
                      <div class="media"><img src="https://bootstrapious.com/i/snippets/sn-chat/avatar.svg" alt="user" width="50" class="rounded-circle">
                        <div class="media-body ml-4">
                          <div class="d-flex align-items-center justify-content-between mb-1">
                            <h6 class="mb-0">Jason Doe</h6><small class="small font-weight-bold">{{conv.date}}</small>
                          </div>
                        </div>
                      </div>
                    </a>
    
                  </div>
                </div>
              </div>
            </div>
            <!-- Chat Box-->
            <div class="col-7 px-0 parent-div" >
              <div *ngFor="let message of conversation"  class="px-4 py-5 chat-box bg-white" >
                <!-- Sender Message-->
                <div *ngIf="message.idActor!=authService.User.id"    class="media w-50 mb-3">
                  <!-- <img src="data:image/png;base64,{{getsender(message.idActor)}}" alt="user" width="50" class="rounded-circle"> -->
                  <div class="media-body ml-3">
                    <div class="bg-light rounded py-2 px-3 mb-2">
                      <p  class="text-small mb-0 text-muted">{{message.content}}</p>
                    </div>
                    <p class="small text-muted">{{message.date}}</p>
                  </div>
                </div>
        
                <!-- Reciever Message-->
                <div *ngIf="message.idActor==authService.User.id"   class="media w-50 ml-auto mb-3">
                  <div class="media-body">
                    <div class="bg-primary rounded py-2 px-3 mb-2">
                      <p class="text-small mb-0 text-white">{{message.content}}</p>
                    </div>
                    <p class="small text-muted">{{message.date}}</p>
                  </div>
                </div>
        
          
        
              </div>
                  <!-- Typing area -->
    
             
        
            </div>
            <form  #messageForm="ngForm" (ngSubmit)="sendMessage(messageForm)" class="bg-light px-4 py-5 ">
              <div class="input-group">
                <input type="text" placeholder="Type a message" aria-describedby="button-addon2"  class="form-control rounded-0 border-0 py-4 bg-light" name="message2"  [(ngModel)]="message2">
                <div class="input-group-append">
                  <button id="button-addon2" type="submit" class="btn btn-link" > <i class="bi bi-send-fill"></i></button>
                </div>
              </div>
            </form>
          </div>
        </div>      </div>
    
    </div>
  </div>
</div>




<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Users you can add</h1>
          </div>
      <div class="modal-body parent-div">
        <div class="card-body">
          <button  type="button" class="btn btn-primary " width="26" height="26" *ngIf="addConvbtn" (click)="createConversation()" >create </button> 

          <!-- Default Table -->
          <table class="table datatable datatable-table" >
            <thead >
              <tr  >
                <th scope="col">#</th>
                <th scope="col">Full Name</th>
                <th scope="col">Email</th>
                <th scope="col">Phone</th>
               
               
              </tr>
            </thead>
             <tbody>
              <tr *ngFor="let u of Users; " >
              <td *ngIf="u.id!=this.idUser"><span><img src="data:image/png;base64,{{u.image.image}}" alt="user" width="50" class="rounded-circle"> 
                </span></td> 
                <td *ngIf="u.id!=this.idUser"><span>{{u.fullName}}</span></td>
                <td *ngIf="u.id!=this.idUser"><span>{{u.email}}</span></td>
                <td *ngIf="u.id!=this.idUser"><span>{{u.phone}}</span></td>
                <td *ngIf="u.id!=this.idUser"><button  type="button" class="btn btn-primary " width="26" height="26"  (click)="UsersofConversation(u.id)" [disabled]="isButtonDisabled(u.id)"   ><i class="bi bi-plus-lg"></i> </button> </td>
               <!-- Modal -->
<div class="modal fade" id="DeleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      Are you sure about deleting this user !
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
      <button type="button" class="btn btn-primary"  >Yes</button>
    </div>
  </div>
</div>
</div>

             </tr>
             </tbody>
          </table>
          <!-- End Default Table Example -->
        </div>      </div>
   
    </div>
  </div>
</div>

